const mongoose = require("mongoose");
const bcrypt = require("bcrypt");

const userSchema = new mongoose.Schema({
    username: {
        type: String,
        required: true,
    },
    email: {
        type: String,
        required: true,
        unique: true,
    },
    password: {
        type: String,
        required: true,
    },
    icon: {
        type: String,
        required: true,
        default: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA9QAAAPUCAMAAAB7CoG2AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAADAFBMVEUAAABtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnFtbnE8pXsRAAAA/3RSTlMAAQIDBAUGBwgJCgsMDQ4PEBES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"
    },
    gender: {
        type: String,
        default: "Female",
    },
    dateOfBirth: {
        type: String,
    },
    phone: {
        type: String,
        required: false,
    },
    address: {
        type: Object,
    },
    appointments: [{
        type: Object,
    }]
}, {timestamps: true, minimize: false});


userSchema.pre('save', async function(next) {
    if (this.isModified('password')) {
        const salt = await bcrypt.genSalt();
        this.password = await bcrypt.hash(this.password, salt);
        next();
    } else {
        // this.passwordChangedAt = Date.now() - 1000;
        next();
    }
});

userSchema.statics.login = async function(email, password) {
    const user = await this.findOne({ email: email });

    if (!user) {
        return res.status(200).json({error: "Invalid Credentials"});
    }

    await bcrypt.compare(password, user.password);
}

const User = mongoose.model('user', userSchema);

module.exports = User;